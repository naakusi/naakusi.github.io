<!DOCTYPE html>
<html>
    <head>
        <title>GIS Final Project SP2017</title>
        <meta charset='utf-8' />
        <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
        
        <!--link to CSS styling -->
        <link rel="stylesheet" href="indexStyle.css" media="screen"/>
        <script src="http://use.edgefonts.net/share-regular:n4,i4,n7,i7:all.js"></script>
        
        <!--link to jquery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
        
        <!-- link to CARTO -->
        <link rel="stylesheet" href="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/themes/css/cartodb.css" />
        <script src="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/cartodb.js"></script>
        
        <!--Google font-->
            <link rel="stylesheet" type="text/css"
          href="https://fonts.googleapis.com/css?family=share">
        
 <!--Bootstrap links-->
           <!-- Latest compiled and misnified CSS -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

      <!-- Optional theme -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

      <!-- Latest compiled and minified JavaScript -->
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>   

        
        
        <!-- element styling-->
        <style>
            
            .map {
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0;
                width: 72%;
                height: 100%;
            }
            
            body {
        font-family: share, sans-serif;
        font-size: ;
            }
            
            .sidepanel {
                background-color: #e5e5e5;
                position: absolute;
                top: 0;
                right: 0;
                bottom: 0;
                width: 28%;
                height: 100%;
                overflow: auto;
                font-family: share-regular, share, sans-serif;
            }
            .wrapper {
                display: block;
                padding: 4px 30px 0 30px;
                font-family: share-regular, share, sans-serif;
                
            }
            
            .intro {
                border-bottom: 4px solid #161444;
                border-top: 4px solid #161444;
                font-family: share-regular, share, sans-serif;
                
            }
            
            .trivia {
                border-bottom: 4px solid #161444;
                
            }
            .l_image {
                position: relative;
                display: block;
                width: 225px;
                left: auto;
                top: 100px;
            }
            .radiobutton {}
            .radiobutton2 {}
            .geopolitics {
                border-bottom: 4px double #161444;
            }
            .radiotoggle {}
            .radiocontent {}
            .radiocontent.default {}
            .buttons {
                
            }
            .buttons2 {
                
            }
            .footer {
                padding: 4px 30px 0 30px;
            }
            .accordian {
                cursor: pointer;
            }
            .accordian-toggle {
                display:inline-block;
                padding-left: 20px;
                padding-right: 20px;
                line-height: 15px;
            }
            .accordian-content {
                display: block;
            }
            .dropdown {
                font-size: 12px;
            }
            .checkbox-container {
                
            }
        </style>
        

    </head>
    
    <body>
        <div class="map" id="map"></div>
        <div class="l_image">
        <a href='https://photos.google.com/share/AF1QipNKI_y1y3iYxNR-vJr6R3IJ51Y0sngoBF05kPbbmuNzYL6znob0DB9kDWTU-e0iBQ?key=S1JYOHNOa3k2SnFPVG9sWmNBcmVnTTRXdFR3N2J3&source=ctrlq.org'><img src='https://lh3.googleusercontent.com/pV6NeBLaxjhprM52UKAkpobA4yySTts24HiEH8nr59piIGw3jY7mHHLrEs0ZxFgyRhLH4jWb6WhXv3lcblq_KQtMaR6rwK2kpWGc5gDlibqjSt2-MH_fP8X7wCQyoQT8AlMrMw' /></a>
        </div>
        
        <div class = "sidepanel">
            <div class = "wrapper">
                <h1 style="color: #1c1887;">World of Agent 007</h1>
                <div class = "intro">
                    <br><br>
                <p style = "font-style: italic; font-size: 12px; color: #363642;">"Our enemies are no longer known to us. They do not exist on a map. They're not nations, they're individuals. And look around you. Who do you fear? Can you see a face, a uniform, a flag? No! Our world is not more transparent now, it's more opaque! It's in the shadows. That's where we must do battle."
                    <br>
                    <p style="font-size: 12px;">--M, Skyfall 2012</p>
                    </p>
                  <br>
                <p style="font-style: italic;font-size: 12px; color: #363642">"There are known knowns, things we know that we know; and there are known unknowns, things that we know we don't know. But there are also unknown unknowns, things we do not know we don't know."
                    </p>
                    <p style="font-size: 12px;">--Donald Rumsfeld, US Secretary of Defense 2001-2006</p>
                 <br>
       
                <div class="accordian">
            <p class="accordian-toggle" style="font-style: italic; color: blue;">...Hide/Show details...</p>
                    
             <div class="accordian-content">
                 
                <center><h3>Mapping Fiction and Real Life</h3></center>
                
                <p style="font-size: 12px; color: #363642;">The idea behind this map is to explore the geopolitical themes featured in the James Bond movie franchise. This project limits its scope to the most recent films produced between 2006 and 2015. Movie themes include; terrorism, corporatism, cyber warfare, and surveillance.
                <br><br>
                One of the challenges in assembling this map is that the countries featured in the movies, for the most part, only serve as scenic backdrops. There isn't any real engagement with political issues of the state. The movies' antagonists do not have political allegiances to any particular nation state. They are rogue individuals working in the shadows to push their own nefarious agendas.
                <br><br> 
                For the purpose of this project, the countries featured in the 2006-2015 Bond movie franchise and highlighted here, serve as a sort of primary filter to explore geopolitics relating to terrorism, cyber warfare, and surveillance. Data used for this map are based on the following indexes:
                    <ul style="font-size: 10px;">
                        <li>Global Terrorism Index (2015), Institute for Economics and Peace</li>
                        <li>Global Cybersecurity Index (2015), International Telecommunications Union</li>
                        <li>Surveillance Industry Index (2016), Transparency Toolkit</li>
                    </ul>
                </p>

                <br>

            <!--accordian-content end-->
                </div>
        
            <!--accordian end-->
            </div>
                <!--intro end-->
        </div>
                
 <!--Map selection options-->
        <div class = "trivia">
            <h2 style="color: #990714;">Movie Trivia</h2>
            
 <!--dropdown movie options-->
            <h3>Countries by Movie</h3>
    <form>
        <select class = "dropdown">
            <option value = "all">All</option>
            <option value = "casino">Casino Royale</option>
            <option value = "quantum">Quantum of Solace</option>
            <option value = "skyfall">Skyfall</option>
            <option value = "spectre">Spectre</option>
            <option value = "clear">Clear</option>
        </select>
    </form>
            <br>
        
            <h3>Birthplace of a Villian</h3>
 <!--villians buttons-->
            <div class = "buttons">
                <button class="lechfr">Le Chiffre</button>
                <br><br>
                <button class="dgreene">Dominic Greene</button>
                <br><br>
                <button class="rsilva">Raoul Silva</button>
                <br><br>
                <button class="mdenbigh">Max Denbigh</button>
                <br><br>
                <button class="esblof">Ernst S. Blofeld</button>
                <br><br>
                <button class="reset">ALL</button>
                <br><br>
                <button class="clear">CLEAR</button>
                <br><br>
            </div>

        <!--trivia div end-->
        </div>
        <br>
                
 <!--geopolitics section-->       
        <div class="geopolitics">
            <h2 style="color: #990714;">Geopolitics</h2>
            
 <!--TI radio options-->
            <h3>Terrorism Impact</h3>
            
           <div class="radiobutton">
             <form id = "rdbtn2">
               <input type="radio" name="trank" value="low">Low</input>
               <input type="radio" name="trank" value="medium">Medium</input>
               <input type="radio" name="trank" value="high">High</input>
               <input type="radio" name="trank" value="reset1">ALL</input>
    <input type="radio" name="trank" value="clear">CLEAR</input>
            </form>
           </div>

<!--CS radio options-->
             <h3>Cyber Security</h3>
<div class="radiobutton2">
  <form id="rdbtn2">
    <input type="radio" name="crank" value="low">Low</input>
    <input type="radio" name="crank" value="medium">Medium</input>
    <input type="radio" name="crank" value="high">High</input>
    <input type="radio" name="crank" value="reset2">ALL</input>
<input type="radio" name="crank" value="clear">CLEAR</input>
  </form>       
</div>

            
<!--surveillance button options--> 
            <h3>Surveillance Technology</h3>
           <div class = "buttons2">
                <button class="suppliers">Suppliers</button>
                <button class="buyers">Buyers</button>
                <button class="reset3">ALL</button>
                <button class="clear3">CLEAR</button>
            </div>
<br><br>

    
        <!--geopolitics div end-->    
        </div>
        <!--wrapper div end-->             
        </div>
            
<!--end credits-->
    <div class="footer">
                
    <div class="accordian">
        
        <h3 class="accordian-toggle">About>></h3>
            <div class="accordian-content">
              <p>
                Creator and purpose
              </p>
            </div>
<br>
                
        <h3 class="accordian-toggle">Data Sources>></h3>
            <div class="accordian-content">
             <p></p>
                    <ul style="list-style-type:hyphen">
                        <li>
                            <a href="http://jamesbond.wikia.com/">007 Wiki</a>
                        </li>
                        <li>
                            <a href="http://visionofhumanity.org/">visionofhumanity.org</a>
                        </li>
                         <li>
                            <a href="http://www.itu.int/">International Telecommunication Union</a>
                        </li>
                        <li>
                            <a href="https://sii.transparencytoolkit.org">Surveillance Industry Index</a>
                        </li>
                        <li>
                            <a href="http://opendata.arcgis.com/">Country Boundaries: Esri.org</a>
                        </li>
                    </ul>
                <!--accordian-content div for Sources end-->
                </div>
        <br>
                
        <h3 class="accordian-toggle">Methodology>></h3>
            <div class="accordian-content">
              <p>
                  Methodology details
              </p>
                <br>
            </div>
                
                <!--accordian-content div end-->
                </div>     
            <!--accordian div end-->
            </div>
  <!--footer div end-->              
 </div>

        </div>
        
  <!--JavaJQuery-->
        <script type="template/html" id="tooltip_template">
          <div class="cartodb-popup v2">
            <a href="#close" class="cartodb-popup-close-button close">x</a>
            <div class="cartodb-popup-content-wrapper">
              <div class="cartodb-popup-content">
                <div>{{occupation}}</div>
                <div>{{cod}}</div>
                <div>{{movie}}</div>
                <img style="width: 100%;" src="{{image_url}}" />
              </div>
            </div>
            <div class="cartodb-popup-tip-container"></div>
          </div>
        </script>

        <script>
            var moviesLayer;
            var villiansLayer;
            var allLayer;
            var terrorLayer;
            var survlLayer;
            var cybrLayer;
           
            
            $(document).ready(function () {
                cartodb.createVis('map', 'https://thenewschool.carto.com/u/n-ama-k/api/v2/viz/cbc768a7-c8d4-4d27-8a27-3351fff77de5/viz.json', {
                    zoom: 2
                })
    
                    .done(function(vis, layers) {
                        allLayer = layers[1].getSubLayer(0);
                        villiansLayer = layers[1].getSubLayer(1);
                        moviesLayer = layers[1].getSubLayer(2);
                        terrorLayer = layers[1].getSubLayer(3);
                        cybrLayer = layers[1].getSubLayer(4);
                        survlLayer = layers[1].getSubLayer(5);
                    
                    var popupTemplate = '<div class="cartodb-popup v2"> <a href="#close" class="cartodb-popup-close-button close">x</a>  <div class="cartodb-popup-content-wrapper">  <div class="cartodb-popup-content"> {{occupation}}:{{cod}}:{{movie}}</div>  </div>  <div class="cartodb-popup-tip-container"></div> </div>';
                        villiansLayer.infowindow.set('template_type', 'mustache');
                        villiansLayer.infowindow.set('template', popupTemplate);
                       
                    
                });


    //dropdown option for movies//
                    //dropdown option//
                    $('.dropdown').change(function() {
                    var type = $(this).val();
                    var sql;
                    if (type === 'all') {
                    sql = "SELECT * FROM select_countries_addvillians";
                    }
                        else if (type === 'casino') {
                            sql = ("SELECT * FROM select_countries_addvillians WHERE movie = 'Casino Royale'")
                        }
                        else if (type === 'quantum') {
                            sql = ("SELECT * FROM select_countries_addvillians WHERE movie = 'Quantum of Solace'")
                        } 
                        else if (type === 'skyfall') {
                            sql = ("SELECT * FROM select_countries_addvillians WHERE movie = 'Skyfall'")
                        }
                        else if (type === 'spectre') {
                            sql = ("SELECT * FROM select_countries_addvillians WHERE movie = 'Spectre'")
                        }
                    else {
                    sql = "SELECT * FROM select_countries_addvillians WHERE movie = '" + type + "'";   
                    }
                    moviesLayer.setSQL(sql)
                        });
   //buttons options for villians//          

                $('.lechfr').click(function() {
                    villiansLayer.setSQL("SELECT * FROM jbvillians WHERE villians = 'Le Chiffre'");
                });
                $('.dgreene').click(function() {
                    villiansLayer.setSQL("SELECT * FROM jbvillians WHERE villians = 'Dominic Greene'");
                });
                $('.rsilva').click(function() {
                    villiansLayer.setSQL("SELECT * FROM jbvillians WHERE villians = 'Raoul Silva'");
                });
                $('.mdenbigh').click(function() {
                    villiansLayer.setSQL("SELECT * FROM jbvillians WHERE villians = 'Max Denbigh'");
                });
                $('.esblof').click(function() {
                    villiansLayer.setSQL("SELECT * FROM jbvillians WHERE villians = 'Ernst Stavros Blofeld'");
                });
                $('.reset').click(function() {
                    villiansLayer.setSQL("SELECT * FROM jbvillians");
                });
                $('.clear').click(function() {
                    villiansLayer.setSQL("SELECT * FROM jbvillians WHERE villians = null")
                });

   //terror radio options//

                $('input[name="trank"]').change(function() {
                    var time = $(this).val();
                    var sql;
                    if(time === 'low') {
                        sql = "SELECT * FROM select_countries_addvillians WHERE tscore2015 >= .0 AND tscore2015 <= 2.207";
                    }
                    if(time === 'medium') {
                        sql = "SELECT * FROM select_countries_addvillians WHERE tscore2015 >= 2.444 AND tscore2015 <= 4.894";
                    }
                    if(time === 'high') {
                        sql = "SELECT * FROM select_countries_addvillians WHERE tscore2015 >= 5.613 AND tscore2015 <= 9.065";
                    }
                    if(time === 'reset1') {
                        sql = "SELECT * FROM select_countries_addvillians";
                    }
                    if(time === 'clear') {
                        sql = "SELECT * FROM select_countries_addvillians WHERE tscore2015 = null";
                    }
                    terrorLayer.setSQL(sql);
                    
                });
                
   //cyber radio options//
                
                $('input[name="crank"]').change(function() {
                    var time = $(this).val();
                    var sql;
                    if(time === 'low') {
                        sql = "SELECT * FROM select_countries_addvillians WHERE cindex2015 >= 0.059 AND cindex2015 <= 0.441";
                    }
                    if(time === 'medium') {
                        sql = "SELECT * FROM select_countries_addvillians WHERE cindex2015 >= 0.5 AND cindex2015 <= 0.588";
                    }
                    if(time === 'high') {
                        sql = "SELECT * FROM select_countries_addvillians WHERE cindex2015 >= 0.647 AND cindex2015 <= 0.824";
                    }
                    if(time === 'reset2') {
                        sql = "SELECT * FROM select_countries_addvillians";
                    }
                    if(time === 'clear') {
                        sql = "SELECT * FROM select_countries_addvillians WHERE cindex2015 = null";
                    }
                    cybrLayer.setSQL(sql);
                    
                });
                
  //surveillance cbutton options//
                $('.suppliers').click(function() {
                    survlLayer.setSQL("SELECT * FROM collected_data_test2_ii WHERE survlstatus = 'Supplier'");
                });
                $('.buyers').click(function() {
                    survlLayer.setSQL("SELECT * FROM collected_data_test2_ii WHERE survlstatus = 'Buyer'");
                });
                $('.reset3').click(function() {
                    survlLayer.setSQL("SELECT * FROM collected_data_test2_ii");
                });
                $('.clear3').click(function() {
                    survlLayer.setSQL("SELECT * FROM collected_data_test2_ii WHERE survlstatus = null");
                });
//$document map layer end//
            });
            
            
    $(document).ready(function($) {
        $('.accordian').find('.accordian-toggle').click(function() {
                    //expand or collapse//
             $(this).next().slideToggle('slow');
                    //hide other panels//
             $(".accordian-content").not($(this).next()).slideUp('slow');
                });
            });
            
            

        </script>
        <script src="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/cartodb.js"></script>
    </body>
</html>
